@page "/Admin/Settings"

<div class="tab-scroll-body">
    <AdminCard HeaderText="系统名称设置" AuthorizeKey="SaveTitle">
        <AdminAlert Text="演示系统禁止更改系统名称" IsShow="IsDemo" />
        <ValidateForm OnValidSubmit="OnSaveTitle" Model="AppInfo">
            <div class="row g-3 form-inline">
                <div class="col-12 col-sm-6">
                    <BootstrapInput @bind-Value="@AppInfo.Title" Readonly="IsDemo" />
                </div>
                <Block Condition="!IsDemo">
                    <div class="col-12 col-sm-6 justify-content-end">
                        <Button ButtonType="ButtonType.Submit" Icon="fa-solid fa-floppy-disk" Text="保存" />
                    </div>
                </Block>
            </div>
        </ValidateForm>
    </AdminCard>

    <AdminCard HeaderText="网站副标题" AuthorizeKey="SaveTitle">
        <ValidateForm OnValidSubmit="OnSaveSubTitle" Model="AppInfo">
            <div class="row g-3 form-inline">
                <div class="col-12 col-sm-6">
                    <BootstrapInput @bind-Value="@AppInfo.SubTitle" Readonly="IsDemo" />
                </div>
                <Block Condition="!IsDemo">
                    <div class="col-12 col-sm-6 justify-content-end">
                        <Button ButtonType="ButtonType.Submit" Icon="fa-solid fa-floppy-disk" Text="保存" />
                    </div>
                </Block>
            </div>
        </ValidateForm>
    </AdminCard>

    <AdminCard HeaderText="网站页脚设置" AuthorizeKey="SaveFooter">
        <AdminAlert Text="演示系统禁止更改网站页脚" IsShow="IsDemo" />
        <ValidateForm OnValidSubmit="OnSaveFooter" Model="AppInfo">
            <div class="row g-3 form-inline">
                <div class="col-12 col-sm-6">
                    <BootstrapInput @bind-Value="@AppInfo.Footer" Readonly="IsDemo" />
                </div>
                <Block Condition="!IsDemo">
                    <div class="col-12 col-sm-6 justify-content-end">
                        <Button ButtonType="ButtonType.Submit" Icon="fa-solid fa-floppy-disk" Text="保存" />
                    </div>
                </Block>
            </div>
        </ValidateForm>
    </AdminCard>

    <AdminCard HeaderText="网站样式设置" AuthorizeKey="SaveTheme">
        <AdminAlert Color="Color.Info">
            <span>注意：本设置将覆盖 <b><TabLink Url="/Admin/Profiles" Text="个人中心" Icon="fa-solid fa-flag">个人中心</TabLink></b> 中设置的网站样式覆盖本设置</span>
        </AdminAlert>
        <ValidateForm OnValidSubmit="OnSaveTheme" Model="AppInfo">
            <div class="row g-3 form-inline">
                <div class="col-12 col-sm-6">
                    <Dropdown Items="Themes" @bind-Value="AppInfo.Theme" />
                </div>
                <div class="col-12 col-sm-6 justify-content-end">
                    <Button ButtonType="ButtonType.Submit" Icon="fa-solid fa-floppy-disk" Text="保存" />
                </div>
            </div>
        </ValidateForm>
    </AdminCard>

    <AdminCard HeaderText="网站功能设置" AuthorizeKey="SaveAppFeatures">
        <ValidateForm OnValidSubmit="OnSaveAppFeatures" Model="AppInfo">
            <div class="row g-3 form-inline">
                <div class="col-6 col-sm-6">
                    <Toggle @bind-Value="AppInfo.SiderbarSetting" OnText="启用" OffText="关闭"></Toggle>
                </div>
                <div class="col-6 col-sm-6">
                    <Toggle @bind-Value="AppInfo.TitleSetting" OnText="启用" OffText="关闭"></Toggle>
                </div>
                <div class="col-6 col-sm-6">
                    <Toggle @bind-Value="AppInfo.FixHeaderSetting" OnText="启用" OffText="关闭"></Toggle>
                </div>
                <div class="col-6 col-sm-6">
                    <Toggle @bind-Value="AppInfo.HealthCheckSetting" OnText="启用" OffText="关闭"></Toggle>
                </div>
                <div class="col-12 col-sm-12 justify-content-end">
                    <Button ButtonType="ButtonType.Submit" Icon="fa-solid fa-floppy-disk" Text="保存" />
                </div>
            </div>
        </ValidateForm>
    </AdminCard>




    <AdminCard HeaderText="日志缓存设置" AuthorizeKey="SaveAdressInfo">
        <ValidateForm OnValidSubmit="OnSaveLogCache" Model="AppInfo">
            <div class="row g-3 form-inline">
                <div class="col-6 col-sm-6">
                    <BootstrapInputNumber @bind-Value="AppInfo.ExceptionExpired"></BootstrapInputNumber>
                </div>
                <div class="col-6 col-sm-6">
                    <BootstrapInputNumber @bind-Value="AppInfo.OperateExpired"></BootstrapInputNumber>
                </div>
                <div class="col-6 col-sm-6">
                    <BootstrapInputNumber @bind-Value="AppInfo.LoginExpired"></BootstrapInputNumber>
                </div>
                <div class="col-6 col-sm-6">
                    <BootstrapInputNumber @bind-Value="AppInfo.AccessExpired"></BootstrapInputNumber>
                </div>
                <div class="col-6 col-sm-6">
                    <BootstrapInputNumber @bind-Value="AppInfo.CookieExpired"></BootstrapInputNumber>
                </div>
                <div class="col-6 col-sm-6">
                    <BootstrapInputNumber @bind-Value="AppInfo.IPCacheExpired"></BootstrapInputNumber>
                </div>
                <div class="col-12 col-sm-12 justify-content-end">
                    <Button ButtonType="ButtonType.Submit" Icon="fa-solid fa-floppy-disk" Text="保存" />
                </div>
            </div>
        </ValidateForm>
    </AdminCard>
</div>
